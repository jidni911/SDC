<div class="signup-container" *ngIf="currentStep!==4">
  <div class="signup-card">
    <div class="logo text-center">
      <img src="assets/logo/logo1.png" alt="Logo" />
      <h2 class="mb-4">Create Your Account</h2>
    </div>

    <div class="progress mb-3">
      <div class="progress-bar" role="progressbar" [style.width.%]="progress" aria-valuemin="0" aria-valuemax="100">
      </div>
    </div>

    <div>
      <div class="form-step" [class.active]="currentStep === 1">
        <div class="mb-3">
          <label>Full Name</label>
          <input type="text" class="form-control" [(ngModel)]="signUpObj.fullName" name="fullName"
            [class.is-invalid]="signUpObjState.fullName === false" [class.is-valid]="signUpObjState.fullName === true"
            (input)="fullNameChange()" />
          <div class="invalid-feedback">{{signUpObjError.fullName}}</div>
        </div>
        <div class="mb-3">
          <label>Username</label>
          <input type="text" class="form-control " [(ngModel)]="signUpObj.username" name="username"
            [class.is-invalid]="signUpObjState.username === false" [class.is-valid]="signUpObjState.username === true"
            (input)="checkUsernameAvailability()" />
          <div class="invalid-feedback">{{signUpObjError.username}}</div>

        </div>
        <div class="mb-3">
          <label>Email</label>
          <input type="email" class="form-control" [(ngModel)]="signUpObj.email" name="email"
            (input)="checkEmailAvailability()" [class.is-invalid]="signUpObjState.email === false"
            [class.is-valid]="signUpObjState.email === true" required />
          <div class="invalid-feedback">{{ signUpObjError.email}}</div>
        </div>
        <div class="text-end">
          <button class="btn btn-primary" [class.disabled]="!isCurrentStepValid()" type="button"
            (click)="nextStep()">Next</button>
        </div>
      </div>

      <div class="form-step" [class.active]="currentStep === 2">
        <div class="mb-3">
          <label>Phone Number</label>
          <input type="text" class="form-control" [(ngModel)]="signUpObj.phoneNumber" name="phoneNumber"
            [class.is-invalid]="signUpObjState.phoneNumber === false"
            [class.is-valid]="signUpObjState.phoneNumber === true" (input)="checkPhoneNumberAvailability()" />
          <div class="invalid-feedback">Valid phone number required.</div>
        </div>
        <div class="mb-3">
          <label>Address</label>
          <input type="text" class="form-control" [(ngModel)]="signUpObj.address" name="address"
            [class.is-invalid]="signUpObjState.address === false" [class.is-valid]="signUpObjState.address === true"
            (input)="checkAddressAvailability()" />
          <div class="invalid-feedback">Minimum 10 characters.</div>
        </div>
        <div class="mb-3">
          <label>Date of Birth</label>
          <input type="date" class="form-control" [(ngModel)]="signUpObj.dob" name="dateOfBirth"
            [class.is-invalid]="signUpObjState.dob === false" [class.is-valid]="signUpObjState.dob === true"
            (input)="checkDobAvailability()" />
          <div class="invalid-feedback">You must be at least 10 years old.</div>
        </div>
        <div class="text-end">
          <button class="btn btn-secondary me-2" type="button" (click)="prevStep()">Back</button>
          <button class="btn btn-primary" type="button" [class.disabled]="!isCurrentStepValid()"
            (click)="nextStep()">Next</button>
        </div>
      </div>

      <div class="form-step" [class.active]="currentStep === 3">
        <div class="mb-3">
          <label>Gender</label>
          <select class="form-select" [(ngModel)]="signUpObj.gender" name="gender"
            [class.is-invalid]="signUpObjState.gender === false" [class.is-valid]="signUpObjState.gender === true"
            (change)="checkGenderAvailability()">
            <option value="">Select</option>
            <option value="MALE">Male</option>
            <option value="FEMALE">Female</option>
            <option value="NOT_SPECIFIED">Not specified</option>
          </select>
          <div class="invalid-feedback">Please select a gender.</div>
        </div>
        <div class="mb-3">
          <label>Password</label>
          <input type="password" class="form-control" [(ngModel)]="signUpObj.password" name="password"
            (input)="checkPasswordAvailability()" [class.is-invalid]="signUpObjState.password === false"
            [class.is-valid]="signUpObjState.password === true" />
          <div class="invalid-feedback">
            8+ character
          </div>
        </div>
        <div class="mb-3">
          <label>Retype Password</label>
          <input type="password" class="form-control" [(ngModel)]="signUpObj.retypePassword" name="retypePassword"
            [class.is-invalid]="signUpObjState.retypePassword === false"
            [class.is-valid]="signUpObjState.retypePassword === true" (input)="checkRetypePasswordAvailability()" />
          <div class="invalid-feedback">Passwords must match.</div>
        </div>
        <div class="text-end">
          <button class="btn btn-secondary me-2" type="button" (click)="prevStep()">Back</button>
          <button class="btn btn-success" type="submit" [class.disabled]="!isCurrentStepValid()"
            (click)="onSubmit()">Sign Up</button>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="email-verification-card animate__animated animate__fadeInUp" *ngIf="currentStep === 4">
  <div class="logo-container mb-3">
    <img src="assets/logo/logo1.png" alt="SDCian Logo" class="logo" />
  </div>

  <h2 class="text-center fw-bold">Welcome to <span class="brand-name">SDCian</span></h2>

  <div class="step-indicator my-3 d-flex justify-content-center align-items-center">
    <div class="step completed"><i class="bi bi-check2-circle"></i></div>
    <div class="step-line"></div>
    <div class="step completed"><i class="bi bi-check2-circle"></i></div>
    <div class="step-line"></div>
    <div class="step completed"><i class="bi bi-check2-circle"></i></div>
    <div class="step-line"></div>
    <div class="step active">4</div>
  </div>

  <div class="text-center mb-4">
    <h5 class="fw-semibold">Step 4</h5>
    <p class="mb-1 fs-5 fw-semibold">Verify Your Email. Check your email for verification code</p>
  </div>

  <div>
    <div class="d-flex justify-content-center gap-2 mb-3">
      <input class="otp-box text-center form-control" type="text" [(ngModel)]="emailVerificationCode" />
    </div>

    <div class="d-grid">
      <button class="btn btn-primary" type="button" [class.disabled]="emailVerificationCode.length!==6" (click)="verifyEmail()">Verify</button>
    </div>

    <div class="text-center mt-3">
      <!-- <small>Didnâ€™t receive the code? <a href="javascript:void(0)" >Resend</a></small> -->
    </div>
  </div>
</div>