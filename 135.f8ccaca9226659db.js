"use strict";(self.webpackChunkSouthDhakaCyclists=self.webpackChunkSouthDhakaCyclists||[]).push([[135],{9135:(V,w,u)=>{u.r(w),u.d(w,{HomeModule:()=>ct});var L=u(4466),b=u(6895),Z=u(4976),h=u(2347),t=u(8256),y=u(7569),v=u(262),U=u(2843),P=u(529);let T=(()=>{const s=class{constructor(n){this.http=n,this.commentUrl=h.N.apiUrl+"/comment"}getAllCommentsByPostId(n){return this.http.get(`${this.commentUrl}/post/${n}`).pipe((0,v.K)(i=>(console.log(i),(0,U._)(i))))}addComment(n){return this.http.post(this.commentUrl,n)}updateComment(n,i){return this.http.put(`${this.commentUrl}/${n}`,i).pipe((0,v.K)(r=>(console.log(r),(0,U._)(r))))}deleteComment(n){return this.http.delete(`${this.commentUrl}/${n}`).pipe((0,v.K)(i=>(console.log(i),(0,U._)(i))))}};let o=s;return s.\u0275fac=function(i){return new(i||s)(t.LFG(P.eN))},s.\u0275prov=t.Yz7({token:s,factory:s.\u0275fac,providedIn:"root"}),o})();var x=u(8320),A=u(2541);function N(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",14),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().index,r=t.oxw(2);return t.KtG(r.onPageChange(i))}),t._uU(1),t.qZA()}if(2&o){const e=t.oxw().index;t.xp6(1),t.Oqu(e+1)}}function J(o,s){if(1&o&&(t.TgZ(0,"button",15),t._uU(1),t.qZA()),2&o){const e=t.oxw().index;t.xp6(1),t.Oqu(e+1)}}function $(o,s){if(1&o&&(t.TgZ(0,"span"),t.YNc(1,N,2,1,"button",12),t.YNc(2,J,2,1,"button",13),t.qZA()),2&o){const e=s.index,n=t.oxw(2);t.xp6(1),t.Q6J("ngIf",n.page.pageable.pageNumber!==e),t.xp6(1),t.Q6J("ngIf",n.page.pageable.pageNumber===e)}}const F=function(){return[]};function R(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",8)(1,"div",9)(2,"button",10),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.onPageChange(i.page.pageable.pageNumber-1))}),t._uU(3,"Previous"),t.qZA(),t.YNc(4,$,3,2,"span",11),t.TgZ(5,"button",10),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.onPageChange(i.page.pageable.pageNumber+1))}),t._uU(6,"Next"),t.qZA()()()}if(2&o){const e=t.oxw();t.xp6(2),t.Q6J("disabled",0===e.page.pageable.pageNumber),t.xp6(2),t.Q6J("ngForOf",t.DdM(3,F).constructor(e.page.totalPages)),t.xp6(1),t.Q6J("disabled",e.page.pageable.pageNumber===e.page.totalPages-1)}}function K(o,s){if(1&o){const e=t.EpF();t.ynx(0),t.TgZ(1,"div",43)(2,"button",44),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,r=t.oxw();return t.KtG(r.delete(i.id))}),t._uU(3," Delete "),t.qZA()(),t.BQk()}}function M(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",43)(1,"button",45),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,r=t.oxw();return t.KtG(r.report(i.id))}),t._uU(2," Report "),t.qZA()()}}function S(o,s){if(1&o&&t._UZ(0,"img",48),2&o){const e=s.$implicit,n=t.oxw(3);t.Q6J("src",n.apiUrl+e.url,t.LSH)}}function j(o,s){if(1&o&&(t.TgZ(0,"div",46),t.YNc(1,S,1,1,"img",47),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",e.postImage)}}function G(o,s){if(1&o&&t._UZ(0,"video",50),2&o){const e=s.$implicit,n=t.oxw(3);t.Q6J("src",n.apiUrl+e.url,t.LSH)}}function Q(o,s){if(1&o&&(t.TgZ(0,"div",46),t.YNc(1,G,1,1,"video",49),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",e.postVideo)}}function D(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",51),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,r=t.oxw();return t.KtG(r.likePost(i.id))}),t._UZ(1,"i",52),t._uU(2," Like "),t.qZA()}}function B(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",53),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().$implicit,r=t.oxw();return t.KtG(r.likePost(i.id))}),t._UZ(1,"i",52),t._uU(2," Liked "),t.qZA()}}function p(o,s){if(1&o&&(t.TgZ(0,"div")(1,"div",56),t._UZ(2,"img",57),t.TgZ(3,"div")(4,"strong"),t._uU(5),t.qZA(),t.TgZ(6,"p",58),t._uU(7),t.qZA()(),t.TgZ(8,"div",59)(9,"div")(10,"i"),t._uU(11),t.ALo(12,"timeAgo"),t.qZA()()()()()),2&o){const e=s.$implicit,n=t.oxw(4);t.xp6(2),t.s9C("src",n.apiUrl+(null==e.user.profilePicture?null:e.user.profilePicture.url),t.LSH),t.xp6(3),t.hij("",e.user.fullName,":"),t.xp6(2),t.Oqu(e.commentText),t.xp6(4),t.Oqu(t.lcZ(12,4,e.createdAt))}}function c(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",55)(1,"div",56),t._UZ(2,"img",57),t.TgZ(3,"div")(4,"strong"),t._uU(5),t.qZA(),t.TgZ(6,"p",58),t._uU(7),t.qZA()(),t.TgZ(8,"div",59)(9,"div")(10,"i"),t._uU(11),t.ALo(12,"timeAgo"),t.qZA()(),t.TgZ(13,"small",21),t._uU(14),t.qZA(),t.TgZ(15,"a",60),t._uU(16," Reply "),t.qZA()()(),t.TgZ(17,"div",39)(18,"div",61),t.YNc(19,p,13,6,"div",11),t.qZA(),t.TgZ(20,"div",62),t._UZ(21,"input",63),t.TgZ(22,"button",64),t.NdJ("click",function(){const r=t.CHM(e).$implicit,d=t.oxw(3);return t.KtG(d.addCommentReply(r.id))}),t._uU(23,"Reply"),t.qZA()()(),t._UZ(24,"hr"),t.qZA()}if(2&o){const e=s.$implicit,n=t.oxw(3);t.xp6(2),t.s9C("src",n.apiUrl+(null==e.user.profilePicture?null:e.user.profilePicture.url),t.LSH),t.xp6(3),t.hij("",e.user.fullName,":"),t.xp6(2),t.Oqu(e.commentText),t.xp6(4),t.Oqu(t.lcZ(12,9,e.createdAt)),t.xp6(3),t.hij("",e.replies?e.replies.length:0," Replies"),t.xp6(1),t.uIk("data-bs-target","#collapseReply"+e.id),t.xp6(2),t.Q6J("id","collapseReply"+e.id),t.xp6(2),t.Q6J("ngForOf",e.replies),t.xp6(2),t.s9C("id","commentReply"+e.id)}}function a(o,s){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,c,25,11,"div",54),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",e.comments)}}function l(o,s){1&o&&(t.TgZ(0,"p"),t._uU(1,"No comments yet."),t.qZA())}function m(o,s){1&o&&(t.TgZ(0,"h5",65),t._uU(1,"Suggested products : "),t.qZA())}function f(o,s){if(1&o&&(t.TgZ(0,"div")(1,"div",67)(2,"div",20),t._UZ(3,"img",68),t.qZA(),t.TgZ(4,"div",69)(5,"p",70),t._uU(6),t.qZA(),t.TgZ(7,"p",70),t._uU(8),t.qZA()()()()),2&o){const e=s.$implicit,n=t.oxw(3);t.xp6(2),t.Q6J("routerLink","/products/productDetails/"+e.id),t.xp6(1),t.Q6J("src",n.apiUrl+e.mainImage.url,t.LSH),t.xp6(3),t.Oqu(e.name),t.xp6(2),t.hij("by ",e.seller.fullName,"")}}function C(o,s){if(1&o&&(t.TgZ(0,"div",66),t.YNc(1,f,9,4,"div",11),t.qZA()),2&o){const e=t.oxw().$implicit;t.xp6(1),t.Q6J("ngForOf",e.products)}}function H(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",16)(1,"div",17),t._UZ(2,"img",18),t.TgZ(3,"div")(4,"h5",19)(5,"a",20),t._uU(6),t.qZA()(),t.TgZ(7,"small",21),t._uU(8),t.ALo(9,"timeAgo"),t.qZA()(),t.TgZ(10,"div",22),t._uU(11),t.YNc(12,K,4,0,"ng-container",23),t.YNc(13,M,3,0,"ng-template",null,24,t.W1O),t.qZA()(),t.TgZ(15,"div",25)(16,"p",26),t._uU(17),t.qZA(),t.YNc(18,j,2,1,"div",27),t.YNc(19,Q,2,1,"div",27),t.qZA(),t.TgZ(20,"div",28)(21,"div",29)(22,"div"),t.YNc(23,D,3,0,"button",30),t.YNc(24,B,3,0,"button",31),t.TgZ(25,"button",32),t._UZ(26,"i",33),t._uU(27," Comment "),t.qZA(),t.TgZ(28,"button",34),t.NdJ("click",function(){const r=t.CHM(e).$implicit,d=t.oxw();return t.KtG(d.sharePsot(r.id))}),t._UZ(29,"i",35),t._uU(30," Share "),t.qZA()(),t.TgZ(31,"small",21),t._uU(32),t.qZA()(),t.TgZ(33,"div",36),t._UZ(34,"input",37),t.TgZ(35,"button",38),t.NdJ("click",function(){const r=t.CHM(e).$implicit,d=t.oxw();return t.KtG(d.addComment(r.id))}),t._uU(36,"Post"),t.qZA()()(),t.TgZ(37,"div",39)(38,"div",28),t.YNc(39,a,2,1,"div",23),t.YNc(40,l,2,0,"ng-template",null,40,t.W1O),t.qZA()(),t.YNc(42,m,2,0,"h5",41),t.YNc(43,C,2,1,"div",42),t.qZA()}if(2&o){const e=s.$implicit,n=t.MAs(14),i=t.MAs(41),r=t.oxw();t.xp6(2),t.Q6J("src",r.getProfilePic(e.creator),t.LSH),t.xp6(3),t.MGl("routerLink","/people/profile/",e.creator.id,""),t.xp6(1),t.Oqu(e.creator.fullName),t.xp6(2),t.Oqu(t.lcZ(9,22,e.createdAt)),t.xp6(3),t.hij(" Report Count : ",e.reporter.length," "),t.xp6(1),t.Q6J("ngIf",e.creator.id==(null==r.user?null:r.user.id))("ngIfElse",n),t.xp6(5),t.Oqu(e.postText),t.xp6(1),t.Q6J("ngIf",e.postImage.length>0),t.xp6(1),t.Q6J("ngIf",e.postVideo.length>0),t.xp6(4),t.Q6J("ngIf",!r.isLiked(e.id)),t.xp6(1),t.Q6J("ngIf",r.isLiked(e.id)),t.xp6(1),t.uIk("data-bs-target","#commentCollapse"+e.id)("aria-controls","commentCollapse"+e.id),t.xp6(7),t.AsE("",e.likers.length," Likes \u2022 ",e.comments.length," Comments"),t.xp6(2),t.s9C("id","comment"+e.id),t.xp6(3),t.Q6J("id","commentCollapse"+e.id),t.xp6(2),t.Q6J("ngIf",e.comments.length>0)("ngIfElse",i),t.xp6(3),t.Q6J("ngIf",e.products.length>0),t.xp6(1),t.Q6J("ngIf",e.products.length>0)}}function I(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",14),t.NdJ("click",function(){t.CHM(e);const i=t.oxw().index,r=t.oxw(2);return t.KtG(r.onPageChange(i))}),t._uU(1),t.qZA()}if(2&o){const e=t.oxw().index;t.xp6(1),t.Oqu(e+1)}}function k(o,s){if(1&o&&(t.TgZ(0,"button",15),t._uU(1),t.qZA()),2&o){const e=t.oxw().index;t.xp6(1),t.Oqu(e+1)}}function O(o,s){if(1&o&&(t.TgZ(0,"span"),t.YNc(1,I,2,1,"button",12),t.YNc(2,k,2,1,"button",13),t.qZA()),2&o){const e=s.index,n=t.oxw(2);t.xp6(1),t.Q6J("ngIf",n.page.pageable.pageNumber!==e),t.xp6(1),t.Q6J("ngIf",n.page.pageable.pageNumber===e)}}function q(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"div",8)(1,"div",9)(2,"button",10),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.onPageChange(i.page.pageable.pageNumber-1))}),t._uU(3,"Previous"),t.qZA(),t.YNc(4,O,3,2,"span",11),t.TgZ(5,"button",10),t.NdJ("click",function(){t.CHM(e);const i=t.oxw();return t.KtG(i.onPageChange(i.page.pageable.pageNumber+1))}),t._uU(6,"Next"),t.qZA()()()}if(2&o){const e=t.oxw();t.xp6(2),t.Q6J("disabled",0===e.page.pageable.pageNumber),t.xp6(2),t.Q6J("ngForOf",t.DdM(3,F).constructor(e.page.totalPages)),t.xp6(1),t.Q6J("disabled",e.page.pageable.pageNumber===e.page.totalPages-1)}}let E=(()=>{const s=class{getProfilePic(n){return n.profilePicture?this.apiUrl+n.profilePicture?.url:"assets/logo/logo2.png"}constructor(n,i,r){this.postService=n,this.commentService=i,this.usersService=r,this.apiUrl=h.N.apiUrl,this.user=null,this.posts=[],this.products=[]}ngOnInit(){this.usersService.user.subscribe(n=>{this.user=n}),this.loadPosts(0)}getProductById(n){return this.products.filter(i=>i.id==n)[0]}addComment(n){let i=document.getElementById("comment"+n);i.value&&this.commentService.addComment({commentText:i.value,imageIds:[],videoIds:[],parentId:null,postId:n}).subscribe(d=>{this.posts.filter(_=>_.id==n)[0].comments.push(d),i.value=""})}addCommentReply(n){let i=document.getElementById("commentReply"+n);i.value&&this.commentService.addComment({commentText:i.value,imageIds:[],videoIds:[],parentId:n,postId:null}).subscribe(d=>{t:for(let _ of this.posts)for(let W of _.comments)if(W.id==n){W.replies.push(d);break t}i.value=""})}likePost(n){this.postService.likePost(n).subscribe(i=>{this.posts.filter(r=>r.id==n)[0].likers=i.likers})}sharePsot(n){}onPageChange(n){this.loadPosts(n)}loadPosts(n){this.postService.getPosts(n).subscribe(i=>{this.page=i,this.posts=this.page.content})}isLiked(n){return!!this.user&&this.posts.filter(i=>i.id==n)[0].likers.map(i=>i.id).includes(this.user.id)}delete(n){this.postService.delete(n).subscribe(i=>{this.ngOnInit()})}report(n){this.postService.report(n).subscribe(i=>{this.ngOnInit()})}};let o=s;return s.\u0275fac=function(i){return new(i||s)(t.Y36(y.P),t.Y36(T),t.Y36(x.f))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-home-page"]],decls:9,vars:3,consts:[[1,"my-5"],[1,"row","justify-content-center"],[1,"col-md-10"],["class","d-flex justify-content-center mt-2",4,"ngIf"],["class","card my-4 shadow-sm",4,"ngFor","ngForOf"],[2,"position","fixed","bottom","20px","right","20px"],["routerLink","/home/createPost",1,"btn","btn-success","btn-floating","rounded-circle"],[1,"bi","bi-plus"],[1,"d-flex","justify-content-center","mt-2"],["role","group",1,"btn-group"],["type","button",1,"btn","btn-outline-success",3,"disabled","click"],[4,"ngFor","ngForOf"],["type","button","class","btn btn-outline-success",3,"click",4,"ngIf"],["type","button","class","btn btn-success","disabled","",4,"ngIf"],["type","button",1,"btn","btn-outline-success",3,"click"],["type","button","disabled","",1,"btn","btn-success"],[1,"card","my-4","shadow-sm"],[1,"card-header","d-flex"],["width","50","height","50","alt","User profile picture",1,"rounded-circle","me-3",3,"src"],[1,"mb-0"],[3,"routerLink"],[1,"text-muted"],[1,"ms-auto"],[4,"ngIf","ngIfElse"],["elseBlock",""],[1,"card-body"],[1,"mb-3"],["class","d-flex justify-content-around row mb-3",4,"ngIf"],[1,"card-footer","align-items-center"],[1,"d-flex","justify-content-between","align-items-center"],["class","btn btn-outline-primary btn-sm me-2",3,"click",4,"ngIf"],["class","btn btn-primary btn-sm me-2",3,"click",4,"ngIf"],["type","button","data-bs-toggle","collapse","aria-expanded","false",1,"btn","btn-outline-secondary","btn-sm","me-2"],[1,"bi","bi-chat"],[1,"btn","btn-outline-secondary","btn-sm",3,"click"],[1,"bi","bi-share"],[1,"input-group","my-3"],["type","text","placeholder","Write a comment...",1,"form-control",3,"id"],["type","button",1,"btn","btn-primary",3,"click"],[1,"collapse",3,"id"],["noComment",""],["class","card-footer",4,"ngIf"],["class","d-flex justify-content-around",4,"ngIf"],[1,"d-grid","gap-2"],["type","button",1,"btn","btn-danger",3,"click"],["type","button",1,"btn","btn-warning",3,"click"],[1,"d-flex","justify-content-around","row","mb-3"],["class","img-fluid rounded col-3 h-100","alt","Post image",3,"src",4,"ngFor","ngForOf"],["alt","Post image",1,"img-fluid","rounded","col-3","h-100",3,"src"],["class","img-fluid rounded col-3 h-100","controls","",3,"src",4,"ngFor","ngForOf"],["controls","",1,"img-fluid","rounded","col-3","h-100",3,"src"],[1,"btn","btn-outline-primary","btn-sm","me-2",3,"click"],[1,"bi","bi-hand-thumbs-up"],[1,"btn","btn-primary","btn-sm","me-2",3,"click"],["class","mb-2",4,"ngFor","ngForOf"],[1,"mb-2"],[1,"d-flex","align-items-center"],["height","30","alt","",1,"rounded-circle","me-2",3,"src"],[1,"mb-1"],[1,"text-end","ms-auto"],["data-bs-toggle","collapse","aria-expanded","false","aria-controls","collapseReply",1,"btn","btn-link"],[1,"ms-5"],[1,"input-group","my-2"],["type","text","placeholder","Write a reply...","aria-label","Reply input",1,"form-control",3,"id"],["type","button",1,"btn","btn-outline-primary",3,"click"],[1,"card-footer"],[1,"d-flex","justify-content-around"],[1,"card","shadow-sm","m-2"],["alt","",1,"card-img-top",2,"height","100px","object-fit","content",3,"src"],[1,"card-body","p-2"],[1,"card-text"]],template:function(i,r){1&i&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2),t.YNc(3,R,7,4,"div",3),t.YNc(4,H,44,24,"div",4),t.YNc(5,q,7,4,"div",3),t.qZA()()(),t.TgZ(6,"div",5)(7,"a",6),t._UZ(8,"i",7),t.qZA()()),2&i&&(t.xp6(3),t.Q6J("ngIf",r.page),t.xp6(1),t.Q6J("ngForOf",r.posts),t.xp6(1),t.Q6J("ngIf",r.page))},dependencies:[b.sg,b.O5,Z.rH,A.e]}),o})();var g=u(433),Y=u(610),z=u(6658);function X(o,s){if(1&o&&(t.TgZ(0,"div",30),t._UZ(1,"img",31),t.qZA()),2&o){const e=s.$implicit,n=s.index,i=t.oxw(2);t.xp6(1),t.MGl("alt","Image ",n+1,""),t.Q6J("src",i.apiURL+e.url,t.LSH)}}function tt(o,s){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,X,2,2,"div",29),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.imageList)}}function et(o,s){if(1&o&&(t.TgZ(0,"div",30),t._UZ(1,"video",32),t.qZA()),2&o){const e=s.$implicit,n=t.oxw(2);t.xp6(1),t.Q6J("src",n.apiURL+e.url,t.LSH)}}function nt(o,s){if(1&o&&(t.TgZ(0,"div"),t.YNc(1,et,2,1,"div",29),t.qZA()),2&o){const e=t.oxw();t.xp6(1),t.Q6J("ngForOf",e.videoList)}}function ot(o,s){if(1&o&&(t.TgZ(0,"div",33)(1,"div",34),t._UZ(2,"img",35),t.TgZ(3,"div",36)(4,"h6",37),t._uU(5),t.qZA(),t.TgZ(6,"p",38),t._uU(7),t.qZA()()()()),2&o){const e=s.$implicit,n=t.oxw();t.xp6(2),t.s9C("src",n.apiURL+e.mainImage.url,t.LSH),t.xp6(3),t.Oqu(e.name),t.xp6(2),t.Oqu(e.seller.fullName)}}function it(o,s){if(1&o){const e=t.EpF();t.TgZ(0,"button",39),t.NdJ("click",function(){const r=t.CHM(e).$implicit,d=t.oxw();return t.KtG(d.addProductToList(r))}),t.TgZ(1,"div",40),t._UZ(2,"img",41),t.TgZ(3,"div")(4,"h6",42),t._uU(5),t.qZA(),t.TgZ(6,"small"),t._uU(7),t.qZA()(),t._UZ(8,"img",43),t.qZA()()}if(2&o){const e=s.$implicit,n=t.oxw();t.xp6(2),t.s9C("src",n.apiURL+e.mainImage.url,t.LSH),t.xp6(3),t.Oqu(e.name),t.xp6(2),t.hij("by ",e.seller.fullName,""),t.xp6(1),t.s9C("src",n.apiURL+e.seller.profilePicture.url,t.LSH)}}const st=[{path:"",redirectTo:"homePage",pathMatch:"full"},{path:"homePage",component:E},{path:"createPost",component:(()=>{const s=class{constructor(n,i,r,d){this.postService=n,this.productService=i,this.filesService=r,this.router=d,this.apiURL=h.N.apiUrl,this.postText="",this.imageList=[],this.videoList=[],this.productList=[],this.privacy="public",this.location="",this.postTag="",this.productSuggestionnList=[]}ngOnInit(){}onSubmit(){let n=new g.cw({postText:new g.NI(this.postText),location:new g.NI(this.location),isPublic:new g.NI("public"==this.privacy),sharedPostId:new g.NI(this.postTag),postImage:new g.NI(this.imageList.map(i=>i.id)),postVideo:new g.NI(this.videoList.map(i=>i.id)),products:new g.NI(this.productList.map(i=>i.id))});this.postService.createPost(n.value).subscribe(i=>{alert("Post created successfully!"),this.router.navigate(["/home"])})}handleImageInput(){const n=document.getElementById("image");if(n.files&&n.files.length>0)for(let i=0;i<n.files.length;i++)this.filesService.uploadImage(n.files[i]).subscribe(d=>{setTimeout(()=>{this.imageList.push({id:d.id,url:d.url}),n.value=""},1e3)})}handleVideoInput(){const n=document.getElementById("video");if(n.files&&n.files.length>0)for(let i=0;i<n.files.length;i++)this.filesService.uploadVideo(n.files[i]).subscribe(d=>{setTimeout(()=>{this.videoList.push({id:d.id,url:d.url}),n.value=""},1e3)})}handleProductInput(n){let r=n.target.value;""!=r?this.productService.searchProducts(r).subscribe(d=>{this.productSuggestionnList=d.content,console.log(this.productSuggestionnList)}):this.productSuggestionnList=[]}addProductToList(n){this.productList.push(n),document.getElementById("productInput").value="",this.productSuggestionnList=[]}};let o=s;return s.\u0275fac=function(i){return new(i||s)(t.Y36(y.P),t.Y36(Y.s),t.Y36(z.n),t.Y36(Z.F0))},s.\u0275cmp=t.Xpm({type:s,selectors:[["app-create-post"]],decls:57,vars:8,consts:[[1,"m-5","shadow","p-5"],[1,"text-center","text-primary"],[1,"mb-3"],["for","content",1,"form-label","h4"],["id","content","rows","4","placeholder","What's on your mind?",1,"form-control",3,"ngModel","ngModelChange"],[1,"row"],[1,"col"],["for","imageList",1,"form-label","h4"],[4,"ngIf"],["for","image",1,"form-label"],["type","file","id","image","accept","image/*","multiple","",1,"form-control",3,"change"],["for","videoList h4",1,"form-label","h4"],["for","video",1,"form-label"],["type","file","id","video","accept","video/*","multiple","",1,"form-control",3,"change"],[1,"row","mb-3"],["class","col-4",4,"ngFor","ngForOf"],["type","text","placeholder","Enter product","id","productInput",1,"form-control",3,"input"],[1,"list-group"],["class","list-group-item list-group-item-action",3,"click",4,"ngFor","ngForOf"],["for","privacy",1,"form-label","h4"],[1,"form-select",3,"ngModel","ngModelChange"],["value","public"],["value","private"],["for","location",1,"form-label","h4"],["type","text","id","location","placeholder","Enter location",1,"form-control",3,"ngModel","ngModelChange"],[1,"h4"],["type","text","placeholder","Enter post tag","aria-label","Post Tag",1,"form-control",3,"ngModel","ngModelChange"],[1,"text-center"],["type","button",1,"btn","btn-outline-success","w-50",3,"click"],["class","mb-2",4,"ngFor","ngForOf"],[1,"mb-2"],[1,"img-fluid","rounded",3,"src","alt"],["controls","",1,"img-fluid","rounded",3,"src"],[1,"col-4"],[1,"card","shadow-sm","mb-3"],["alt","...",1,"card-img-top",3,"src"],[1,"card-body"],[1,"card-title"],[1,"card-text"],[1,"list-group-item","list-group-item-action",3,"click"],[1,"d-flex","w-100","justify-content-between"],["alt","","height","50",1,"rounded","me-2",3,"src"],[1,"mb-1"],["alt","","height","50",1,"rounded","ms-2",3,"src"]],template:function(i,r){1&i&&(t.TgZ(0,"div",0)(1,"h1",1),t._uU(2,"Create a Post"),t.qZA(),t.TgZ(3,"div")(4,"div",2)(5,"label",3),t._uU(6,"Post Content"),t.qZA(),t.TgZ(7,"textarea",4),t.NdJ("ngModelChange",function(_){return r.postText=_}),t.qZA()(),t.TgZ(8,"div",5)(9,"div",6)(10,"div",2)(11,"label",7),t._uU(12,"Image List"),t.qZA(),t.YNc(13,tt,2,1,"div",8),t.qZA(),t.TgZ(14,"div",2)(15,"label",9),t._uU(16,"Image"),t.qZA(),t.TgZ(17,"input",10),t.NdJ("change",function(){return r.handleImageInput()}),t.qZA()()(),t.TgZ(18,"div",6)(19,"div",2)(20,"label",11),t._uU(21,"Video List"),t.qZA(),t.YNc(22,nt,2,1,"div",8),t.qZA(),t.TgZ(23,"div",2)(24,"label",12),t._uU(25,"Video"),t.qZA(),t.TgZ(26,"input",13),t.NdJ("change",function(){return r.handleVideoInput()}),t.qZA()()()(),t.TgZ(27,"div",2)(28,"h4"),t._uU(29,"Products"),t.qZA(),t.TgZ(30,"div",14),t.YNc(31,ot,8,3,"div",15),t.qZA(),t.TgZ(32,"div",2)(33,"label",12),t._uU(34,"Product"),t.qZA(),t.TgZ(35,"input",16),t.NdJ("input",function(_){return r.handleProductInput(_)}),t.qZA(),t.TgZ(36,"div",17),t.YNc(37,it,9,4,"button",18),t.qZA()()(),t.TgZ(38,"div",2)(39,"label",19),t._uU(40,"Privacy"),t.qZA(),t.TgZ(41,"select",20),t.NdJ("ngModelChange",function(_){return r.privacy=_}),t.TgZ(42,"option",21),t._uU(43,"Public"),t.qZA(),t.TgZ(44,"option",22),t._uU(45,"Private"),t.qZA()()(),t.TgZ(46,"div",2)(47,"label",23),t._uU(48,"Location"),t.qZA(),t.TgZ(49,"input",24),t.NdJ("ngModelChange",function(_){return r.location=_}),t.qZA()(),t.TgZ(50,"div",2)(51,"p",25),t._uU(52,"Tag another post:"),t.qZA(),t.TgZ(53,"input",26),t.NdJ("ngModelChange",function(_){return r.postTag=_}),t.qZA()(),t.TgZ(54,"div",27)(55,"button",28),t.NdJ("click",function(){return r.onSubmit()}),t._uU(56,"Submit"),t.qZA()()()()),2&i&&(t.xp6(7),t.Q6J("ngModel",r.postText),t.xp6(6),t.Q6J("ngIf",r.imageList&&r.imageList.length>0),t.xp6(9),t.Q6J("ngIf",r.videoList&&r.videoList.length>0),t.xp6(9),t.Q6J("ngForOf",r.productList),t.xp6(6),t.Q6J("ngForOf",r.productSuggestionnList),t.xp6(4),t.Q6J("ngModel",r.privacy),t.xp6(8),t.Q6J("ngModel",r.location),t.xp6(4),t.Q6J("ngModel",r.postTag))},dependencies:[b.sg,b.O5,g.YN,g.Kr,g.Fj,g.EJ,g.JJ,g.On]}),o})()}];let rt=(()=>{const s=class{};let o=s;return s.\u0275fac=function(i){return new(i||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[Z.Bz.forChild(st),Z.Bz]}),o})(),ct=(()=>{const s=class{};let o=s;return s.\u0275fac=function(i){return new(i||s)},s.\u0275mod=t.oAB({type:s}),s.\u0275inj=t.cJS({imports:[b.ez,rt,g.u5,g.UX,L.m]}),o})()},2541:(V,w,u)=>{u.d(w,{e:()=>b});var L=u(8256);let b=(()=>{const h=class{transform(y){if(!y)return"";const v=new Date,U=new Date(y),P=Math.floor((v.getTime()-U.getTime())/1e3),T=Math.floor(P/60),x=Math.floor(T/60),A=Math.floor(x/24),N=Math.floor(A/30),J=Math.floor(N/12);return P<60?1===P?"1 second ago":`${P} seconds ago`:T<60?1===T?"1 minute ago":`${T} minutes ago`:x<24?1===x?"1 hour ago":`${x} hours ago`:A<30?1===A?"1 day ago":`${A} days ago`:N<12?1===N?"1 month ago":`${N} months ago`:1===J?"1 year ago":`${J} years ago`}};let Z=h;return h.\u0275fac=function(v){return new(v||h)},h.\u0275pipe=L.Yjl({name:"timeAgo",type:h,pure:!0}),Z})()},6658:(V,w,u)=>{u.d(w,{n:()=>B});var L=u(4482),b=u(5403),Z=u(4671),h=u(9751),t=u(727);class y extends t.w0{constructor(c,a){super()}schedule(c,a=0){return this}}const v={setInterval(p,c,...a){const{delegate:l}=v;return l?.setInterval?l.setInterval(p,c,...a):setInterval(p,c,...a)},clearInterval(p){const{delegate:c}=v;return(c?.clearInterval||clearInterval)(p)},delegate:void 0};var U=u(8737);const T={now:()=>(T.delegate||Date).now(),delegate:void 0};class x{constructor(c,a=x.now){this.schedulerActionCtor=c,this.now=a}schedule(c,a=0,l){return new this.schedulerActionCtor(this,c).schedule(l,a)}}x.now=T.now;const J=new class A extends x{constructor(c,a=x.now){super(c,a),this.actions=[],this._active=!1}flush(c){const{actions:a}=this;if(this._active)return void a.push(c);let l;this._active=!0;do{if(l=c.execute(c.state,c.delay))break}while(c=a.shift());if(this._active=!1,l){for(;c=a.shift();)c.unsubscribe();throw l}}}(class P extends y{constructor(c,a){super(c,a),this.scheduler=c,this.work=a,this.pending=!1}schedule(c,a=0){var l;if(this.closed)return this;this.state=c;const m=this.id,f=this.scheduler;return null!=m&&(this.id=this.recycleAsyncId(f,m,a)),this.pending=!0,this.delay=a,this.id=null!==(l=this.id)&&void 0!==l?l:this.requestAsyncId(f,this.id,a),this}requestAsyncId(c,a,l=0){return v.setInterval(c.flush.bind(c,this),l)}recycleAsyncId(c,a,l=0){if(null!=l&&this.delay===l&&!1===this.pending)return a;null!=a&&v.clearInterval(a)}execute(c,a){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const l=this._execute(c,a);if(l)return l;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(c,a){let m,l=!1;try{this.work(c)}catch(f){l=!0,m=f||new Error("Scheduled action threw falsy error")}if(l)return this.unsubscribe(),m}unsubscribe(){if(!this.closed){const{id:c,scheduler:a}=this,{actions:l}=a;this.work=this.state=this.scheduler=null,this.pending=!1,(0,U.P)(l,this),null!=c&&(this.id=this.recycleAsyncId(a,c,null)),this.delay=null,super.unsubscribe()}}});var $=u(3532);var K=u(8421);function M(p=1/0){let c;c=p&&"object"==typeof p?p:{count:p};const{count:a=1/0,delay:l,resetOnSuccess:m=!1}=c;return a<=0?Z.y:(0,L.e)((f,C)=>{let I,H=0;const k=()=>{let O=!1;I=f.subscribe((0,b.x)(C,q=>{m&&(H=0),C.next(q)},void 0,q=>{if(H++<a){const E=()=>{I?(I.unsubscribe(),I=null,k()):O=!0};if(null!=l){const g="number"==typeof l?function R(p=0,c,a=J){let l=-1;return null!=c&&((0,$.K)(c)?a=c:l=c),new h.y(m=>{let f=function F(p){return p instanceof Date&&!isNaN(p)}(p)?+p-a.now():p;f<0&&(f=0);let C=0;return a.schedule(function(){m.closed||(m.next(C++),0<=l?this.schedule(void 0,l):m.complete())},f)})}(l):(0,K.Xf)(l(q,H)),Y=(0,b.x)(C,()=>{Y.unsubscribe(),E()},()=>{C.complete()});g.subscribe(Y)}else E()}else C.error(q)})),O&&(I.unsubscribe(),I=null,k())};k()})}var S=u(262),j=u(2843),G=u(2347),Q=u(8256),D=u(529);let B=(()=>{const c=class{constructor(l){this.httpClient=l,this.apiURL=G.N.apiUrl+"/file"}uploadVideo(l){const m=new FormData;return m.append("video",l,l.name),this.httpClient.post(this.apiURL+"/uploadVideo",m).pipe(M(1),(0,S.K)(this.handleError))}uploadImage(l){const m=new FormData;return m.append("image",l,l.name),this.httpClient.post(this.apiURL+"/uploadImage",m).pipe(M(1),(0,S.K)(this.handleError))}handleError(l){let m="An unknown error occurred!";return m=l.error instanceof ErrorEvent?`Error: ${l.error.message}`:`Error Code: ${l.status}\nMessage: ${l.message}`,(0,j._)(()=>new Error(m))}};let p=c;return c.\u0275fac=function(m){return new(m||c)(Q.LFG(D.eN))},c.\u0275prov=Q.Yz7({token:c,factory:c.\u0275fac,providedIn:"root"}),p})()}}]);