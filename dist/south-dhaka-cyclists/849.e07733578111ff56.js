"use strict";(self.webpackChunkSouthDhakaCyclists=self.webpackChunkSouthDhakaCyclists||[]).push([[849],{908:(A,g,a)=>{a.r(g),a.d(g,{MessgesModule:()=>_});var d=a(6895),l=a(2019),e=a(8256),u=a(2347),p=a(529);let x=(()=>{const t=class{constructor(n){this.http=n,this.url=u.N.apiUrl+"/messege"}getMesseges(n=0,i=20){return this.http.get(this.url+`?page=${n}&size=${i}`)}};let s=t;return t.\u0275fac=function(i){return new(i||t)(e.LFG(p.eN))},t.\u0275prov=e.Yz7({token:t,factory:t.\u0275fac,providedIn:"root"}),s})();var c=a(433);function f(s,t){if(1&s){const o=e.EpF();e.TgZ(0,"div",10),e.NdJ("click",function(){const r=e.CHM(o).$implicit,h=e.oxw();return e.KtG(h.selectChat(r))}),e.TgZ(1,"div",11)(2,"div")(3,"strong"),e._uU(4),e.qZA(),e.TgZ(5,"small",12),e._uU(6),e.qZA()(),e.TgZ(7,"span",13),e._uU(8),e.qZA()()()}if(2&s){const o=t.$implicit;e.xp6(4),e.Oqu(o.name),e.xp6(2),e.Oqu(o.lastMessage),e.xp6(2),e.Oqu(o.unreadCount)}}const m=function(s){return{"text-end":s}},C=function(s,t){return{"bg-primary":s,"bg-success":t}};function v(s,t){if(1&s&&(e.TgZ(0,"div",22)(1,"div",23)(2,"div",24)(3,"span",25),e._uU(4),e.qZA(),e.TgZ(5,"span",26)(6,"span",27),e._uU(7),e.qZA()()()()()),2&s){const o=t.$implicit;e.xp6(1),e.Q6J("ngClass",e.VKq(5,m,"me"===o.sender)),e.xp6(3),e.Oqu(o.time),e.xp6(1),e.Q6J("ngClass",e.VKq(7,m,"me"===o.sender)),e.xp6(1),e.Q6J("ngClass",e.WLB(9,C,"me"===o.sender,"me"!==o.sender)),e.xp6(1),e.hij(" ",o.text," ")}}function T(s,t){if(1&s){const o=e.EpF();e.TgZ(0,"div",14)(1,"div",15)(2,"h5"),e._uU(3),e.qZA()(),e.TgZ(4,"div",16),e.YNc(5,v,8,12,"div",17),e.qZA(),e.TgZ(6,"div",18)(7,"div",19)(8,"input",20),e.NdJ("ngModelChange",function(i){e.CHM(o);const r=e.oxw();return e.KtG(r.messageText=i)})("keydown.enter",function(){e.CHM(o);const i=e.oxw();return e.KtG(i.sendMessage())}),e.qZA(),e.TgZ(9,"button",21),e.NdJ("click",function(){e.CHM(o);const i=e.oxw();return e.KtG(i.sendMessage())}),e._uU(10,"Send"),e.qZA()()()()}if(2&s){const o=e.oxw();e.xp6(3),e.Oqu(o.selectedChat.name),e.xp6(2),e.Q6J("ngForOf",o.selectedChat.messages),e.xp6(3),e.Q6J("ngModel",o.messageText)}}function M(s,t){1&s&&(e.TgZ(0,"div",28)(1,"h5"),e._uU(2,"Select a chat to start messaging"),e.qZA()())}const y=[{path:"",redirectTo:"messegeLists",pathMatch:"full"},{path:"messegeLists",component:(()=>{const t=class{constructor(n){this.messegeService=n,this.messeges=[],this.searchText="",this.messageText="",this.selectedChat=null,this.chats=[{name:"John Doe",lastMessage:"Hey, how are you?",unreadCount:2,messages:[{sender:"me",text:"Hello!",time:"10:01 AM"},{sender:"other",text:"Hi there!",time:"10:02 AM"},{sender:"me",text:"How are you?",time:"10:05 AM"},{sender:"other",text:"I am doing good, thanks!",time:"10:06 AM"}]},{name:"Jane Smith",lastMessage:"Let\u2019s meet tomorrow.",unreadCount:1,messages:[{sender:"other",text:"Hey, when are you free?",time:"09:30 AM"},{sender:"me",text:"Tomorrow works!",time:"09:35 AM"}]},{name:"Robert Brown",lastMessage:"Check this out!",unreadCount:0,messages:[{sender:"other",text:"Look at this meme!",time:"08:30 AM"},{sender:"me",text:"Haha, that\u2019s funny!",time:"08:32 AM"}]}]}ngOnInit(){this.messegeService.getMesseges().subscribe(n=>{this.messeges=n.content})}selectChat(n){this.selectedChat=n,n.unreadCount=0}sendMessage(){""!==this.messageText.trim()&&(this.selectedChat.messages.push({sender:"me",text:this.messageText,time:(new Date).toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}),this.messageText="")}filterChats(){this.chats=this.chats.filter(n=>n.name.toLowerCase().includes(this.searchText.toLowerCase()))}};let s=t;return t.\u0275fac=function(i){return new(i||t)(e.Y36(x))},t.\u0275cmp=e.Xpm({type:t,selectors:[["app-messges"]],decls:12,vars:4,consts:[[1,"container-fluid"],[1,"row"],[1,"col-md-4","p-3","border","shadow",2,"height","100vh"],[1,"mb-3"],["type","text","placeholder","Search chats...",1,"form-control",3,"ngModel","ngModelChange","input"],[1,"list-group"],["class","list-group-item list-group-item-action",3,"click",4,"ngFor","ngForOf"],[1,"col-md-8","p-3"],["class","border rounded-3","style","height: 90vh;",4,"ngIf"],["class","text-center","style","height: 100%;",4,"ngIf"],[1,"list-group-item","list-group-item-action",3,"click"],[1,"d-flex","justify-content-between"],[1,"d-block","text-muted"],[1,"badge","bg-info","h-100","rounded","rounded-circle"],[1,"border","rounded-3",2,"height","90vh"],[1,"chat-header","p-3"],[1,"chat-body","p-3",2,"height","75%","overflow-y","auto"],["class","message",4,"ngFor","ngForOf"],[1,"chat-footer","p-3"],[1,"input-group"],["type","text","placeholder","Type a message...",1,"form-control",3,"ngModel","ngModelChange","keydown.enter"],[1,"btn","btn-primary",3,"click"],[1,"message"],[3,"ngClass"],[1,"d-flex","flex-column"],[1,"text-muted","small"],[1,"py-2",3,"ngClass"],[1,"message-text",3,"ngClass"],[1,"text-center",2,"height","100%"]],template:function(i,r){1&i&&(e.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"input",4),e.NdJ("ngModelChange",function(w){return r.searchText=w})("input",function(){return r.filterChats()}),e.qZA()(),e.TgZ(5,"h4"),e._uU(6,"Inbox"),e.qZA(),e.TgZ(7,"div",5),e.YNc(8,f,9,3,"div",6),e.qZA()(),e.TgZ(9,"div",7),e.YNc(10,T,11,3,"div",8),e.YNc(11,M,3,0,"div",9),e.qZA()()()),2&i&&(e.xp6(4),e.Q6J("ngModel",r.searchText),e.xp6(4),e.Q6J("ngForOf",r.chats),e.xp6(2),e.Q6J("ngIf",r.selectedChat),e.xp6(1),e.Q6J("ngIf",!r.selectedChat))},dependencies:[d.mk,d.sg,d.O5,c.Fj,c.JJ,c.On],styles:[".chat-body[_ngcontent-%COMP%]{max-height:75vh;overflow-y:scroll}.message-text[_ngcontent-%COMP%]{border-radius:12px;padding:10px;margin:5px;max-width:75%;word-wrap:break-word}input.form-control[_ngcontent-%COMP%]{border-radius:30px}"]}),s})()}];let Z=(()=>{const t=class{};let s=t;return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[l.Bz.forChild(y),l.Bz]}),s})(),_=(()=>{const t=class{};let s=t;return t.\u0275fac=function(i){return new(i||t)},t.\u0275mod=e.oAB({type:t}),t.\u0275inj=e.cJS({imports:[d.ez,Z,c.u5,c.UX]}),s})()}}]);